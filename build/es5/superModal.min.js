"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},_createClass=function(){function t(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,s,i){return s&&t(e.prototype,s),i&&t(e,i),e}}(),superModal=function(){function t(e){_classCallCheck(this,t),this.options={settings:{duration:200,custom:!1,modalClass:"superModal"},style:{"overlay-color":"#2B2E38","content-position":"left","accept-color":"#2ecc71","decline-color":"#e74c3c","close-color":"#121212"},buttons:{accept:{visible:!0,content:"Accept",fn:null},decline:{visible:!0,content:"Decline",fn:null}},content:{title:"Title!",text:"Message: "},alert:{title:"Attention!",text:"It is Alert!",button:"Ok!"},confirm:{content:{title:"We need your approval.",text:"How are you think, is the superModal the best library that can make your web developing easier?"},buttons:{decline:{content:"Cancel",fn:console.log.bind(this,"Cancel is pushed!")},accept:{content:"Confirm",fn:console.log.bind(this,"Confirm is pushed!")}}},image:{src:"",fn:null},paste:{content:{title:"Attention!",html:"<div> Your html here! </div>"},buttons:{decline:{content:"Cancel",fn:null},accept:{content:"Confirm",fn:null}}}},this._parseOptions(e),this.isOpened=!1,this.init()}return _createClass(t,[{key:"sheet",value:function(){if(this.options.settings.custom)return this;var t=document.createElement("style"),e=this.options.style,s=".{modalClass}__hidden{display:none!important}.{modalClass}{position:fixed;left:0;top:0;width:100%;height:100%;z-index:9999;overflow:hidden}.{modalClass}__overlay{position:absolute;z-index:100;top:-5000px;right:-5000px;bottom:-5000px;left:-5000px;display:block;background:{overlay-color};opacity:0;transition:opacity .2s ease}.{modalClass}__html{padding-bottom: 10px;}.{modalClass}__wrapper{text-align:{content-position};position:absolute;left:50%;top:50%;z-index:200;width:50%;max-width:750px;min-width:200px;max-height:90%;padding-bottom:25px;transform:translate(-50%,-50%) scale(1.1);transition:transform .2s ease,opacity .2s ease;opacity:0;background-color:#fff}@media screen and (max-width:768px){.{modalClass}__wrapper{width:80%}}.{modalClass}__loaded .{modalClass}__wrapper{transform:translate(-50%,-50%) scale(1);opacity:1}.{modalClass}__loaded .{modalClass}__overlay{opacity:.9}.{modalClass}__scrolling .{modalClass}__wrapper{height:90%}@media screen and (max-width:480px){.{modalClass}__scrolling .{modalClass}__wrapper{width:95%}}.{modalClass}__scrolling .{modalClass}__body{position:absolute;left:5%;top:20%;width:94.9%;height:70%;overflow-y:scroll;padding-top:0}.{modalClass}__scrolling .{modalClass}__text{padding-right:5%}.{modalClass}__scrolling .{modalClass}__title--add{padding-top:15px}.{modalClass}__scrolling .{modalClass}__header{height:20%;position:absolute;left:5%;width:90%;overflow:hidden;min-height:80px;background-color:#fff;z-index:10;-webkit-display:flex;-moz-display:flex;-ms-display:flex;-o-display:flex;display:flex;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.{modalClass}__scrolling .{modalClass}__close{right:0}.{modalClass}__scrolling .{modalClass}__footer{position:absolute;left:5%;bottom:0;width:90%;height:10%;min-height:40px;background-color:#fff;-webkit-display:flex;-moz-display:flex;-ms-display:flex;-o-display:flex;display:flex;-webkit-justify-content:flex-start;-moz-justify-content:flex-start;-ms-justify-content:flex-start;-o-justify-content:flex-start;justify-content:flex-start;-webkit-align-items:center;-moz-align-items:center;-ms-align-items:center;-o-align-items:center;align-items:center}.{modalClass}__image{display:block}.{modalClass}--image__alert .{modalClass}__wrapper{height:90%}.{modalClass}--image__alert .{modalClass}__text,.{modalClass}--image__alert .{modalClass}__title{display:none}.{modalClass}--image__alert .{modalClass}__header{z-index:100;background-color:transparent}.{modalClass}--image__alert .{modalClass}__footer{height:0;display:none}.{modalClass}--image__alert .{modalClass}__body{height:100%;left:0;top:0;width:100%;overflow:hidden}.{modalClass}--image__alert .{modalClass}__image img{position:absolute;width:100%;height:100%;object-fit:cover}.{modalClass}__container{width:90%;margin:0 auto}.{modalClass}__close{position:absolute;top:20px;right:5%;display:block;height:14px;width:14px;opacity:.5;-webkit-transition:opacity .2s ease;-moz-transition:opacity .2s ease;-ms-transition:opacity .2s ease;-o-transition:opacity .2s ease;transition:opacity .2s ease}.{modalClass}__body img,.{modalClass}__close svg{display:block;width:100%}.{modalClass}__close:hover{opacity:1}.{modalClass}__close svg{height:100%;fill:{close-color}}.{modalClass}__body{padding-top:20px;color:#121212}.{modalClass}__title{margin:0;width:95%;padding-top:20px;padding-bottom:5px;font-size:1.8rem;line-height:2.4rem;color:inherit}@media screen and (max-width:1440px){.{modalClass}__title{font-size:1.6rem;line-height:2.2rem}}.{modalClass}__text{font-size:1.2rem;line-height:1.8rem;margin:0;padding-top:5px;padding-bottom:20px;color:inherit}@media screen and (max-width:1440px){.{modalClass}__text{font-size:1rem;line-height:1.6rem}}.{modalClass}__btn{display:inline-block;padding:7px 10px;margin-right:5px;background-color:#121212;text-transform:uppercase;text-decoration:none;color:#fff;font-size:1rem;line-height:1.2rem;transition:opacity .2s ease}@media screen and (max-width:768px){.{modalClass}__btn{font-size:.8rem;line-height:1.2rem}}.{modalClass}__btn:hover{opacity:.6}.{modalClass}__accept{background-color:{accept-color}}.{modalClass}__decline{background-color:{decline-color}}@media screen and (max-width:480px) and (max-height:533px){.{modalClass}__title{font-size:1.2rem;line-height:1.8rem}}";t.appendChild(document.createTextNode("")),document.head.appendChild(t),e.duration=this.options.settings.duration+"ms",e.modalClass=this.options.settings.modalClass;for(var i in e){var o=e[i];s=s.replace(new RegExp("{"+i+"}","gi"),o)}var a=document.querySelector(e.modalClass+"-styles");if(a)for(var n=0,l=a.length;l>n;n++)if(a[n].getAttribute("id")===e.modalClass+"-styles")throw new TypeError(e.modalClass+" styles is already init'ed.");return t.setAttribute("id",e.modalClass+"-styles"),t.innerHTML=s,this}},{key:"html",value:function(){var t='<div class="{modalClass}__overlay"></div><div class="{modalClass}__wrapper"> <div class="{modalClass}__container"> <div class="{modalClass}__header"> <h5 class="{modalClass}__title {modalClass}__title--add"></h5> <a href="javascript:;" class="{modalClass}__close"> <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 212.982 212.982" style="enable-background:new 0 0 212.982 212.982;" xml:space="preserve"> <g id="Close"> <path d="M131.804,106.491l75.936-75.936c6.99-6.99,6.99-18.323,0-25.312 c-6.99-6.99-18.322-6.99-25.312,0l-75.937,75.937L30.554,5.242c-6.99-6.99-18.322-6.99-25.312,0c-6.989,6.99-6.989,18.323,0,25.312 l75.937,75.936L5.242,182.427c-6.989,6.99-6.989,18.323,0,25.312c6.99,6.99,18.322,6.99,25.312,0l75.937-75.937l75.937,75.937 c6.989,6.99,18.322,6.99,25.312,0c6.99-6.99,6.99-18.322,0-25.312L131.804,106.491z"/> </g> </svg> </a> </div> <div class="{modalClass}__body"><p class="{modalClass}__text">{text}</p><a href="javascript:;" class="{modalClass}__image"></a></div><div class="{modalClass}__footer"> <a href="javascript:;" class="{modalClass}__btn {modalClass}__accept {accept__hidden}">{accept}</a> <a href="javascript:;" class="{modalClass}__btn {modalClass}__decline {decline__hidden}">{decline}</a> </div></div></div>',e=this.options,s=e.buttons,i=e.content,o=e.settings.modalClass;if(document.querySelector("."+o))throw new TypeError(o+" markup is already init'ed.");if("object"===("undefined"==typeof e?"undefined":_typeof(e))){for(var a in s){var n=s[a],l=a+"__hidden",d=void 0,r=n.content;d=n.visible?"":o+"__hidden",t=t.replace(new RegExp("{"+l+"}","gi"),d).replace(new RegExp("{"+a+"}","gi"),r)}i.modalClass=o;for(var c in i){var m=i[c];t=t.replace(new RegExp("{"+c+"}","gi"),m)}}else t=!1;if(t){var h=document.createElement("div");return h.classList.add(o,o+"__hidden"),h.innerHTML=t,document.body.appendChild(h),this.markup=t,this}throw new TypeError("Error {this.options} should be an object!")}},{key:"cache",value:function(t){var e={main:"",body:"body",modal:"wrapper",close:"close",title:"title",text:"text",image:"image",accept:"accept",decline:"decline",overlay:"overlay"},s=this.options.settings.modalClass;for(var i in e){var o=e[i];e[i]=s+(o?"__":"")+o}this.dom={};for(var a in e)this.dom[a]=document.querySelector("."+e[a]);return t&&t.call(this),this}},{key:"_parseOptions",value:function(t){var e=this.options;for(var s in t){var i=t[s];if("object"===("undefined"==typeof i?"undefined":_typeof(i)))for(var o in i){var a=i[o];if("object"===("undefined"==typeof a?"undefined":_typeof(a)))for(var n in a){var l=a[n];if("object"===("undefined"==typeof l?"undefined":_typeof(l)))for(var d in l){var r=l[d];e[s][o][n][d]=r}else e[s][o][n]=l}else e[s][o]=a}else e[s]=i}}},{key:"_closeConstr",value:function(t,e){return function(){var s=void 0;e&&(s=e()),s||t.hide.call(t)}}},{key:"_removeImages",value:function(t){var e=this.dom;if(e.image.remove){var s=t||e.image.querySelectorAll("img");if(!s.length)return this;for(var i=0,o=s.length;o>i;i++)s[i].remove()}else e.image.removeChild("img");return this}},{key:"_setText",value:function(t,e,s,i,o){var a=this.dom,n=this.options;a.title.textContent=t||n.content.title,o||(a.text.textContent=e||n.content.text),a.accept.textContent=s||n.buttons.accept.content,a.decline.textContent=i||n.buttons.decline.content}},{key:"_setMode",value:function(t){var e=this,s=e.dom.main,i=e.options.settings.modalClass;return s.classList.remove(i+"__scrolling"),setTimeout(function(){var o=parseInt(e.dom.modal.clientHeight,10),a=.9*parseInt(window.innerHeight,10);o>a&&s.classList.add(i+"__scrolling"),t.call(e)},100),this}},{key:"_parseObject",value:function(t){return null!=t&&"object"===("undefined"==typeof t?"undefined":_typeof(t))?t:!1}},{key:"_toModal",value:function(){var t=this.dom,e=this.options.settings.modalClass;return t.main.classList.remove(e+"--image",e+"--image__alert"),this._modBody(!0),this._removeImages(),this.isImage=!1,this}},{key:"_modBody",value:function(t){var e=void 0,s=this.dom,i=this.options.settings.modalClass;this.isHTML?(e="remove",this.isHTML=!1,this._removeImages(s.body.querySelectorAll("."+i+"__html"))):e="add";for(var o=0,a=s.body.children.length;a>o;o++)s.body.children[o].classList[e](i+"__hidden");t&&s.text.classList.remove(i+"__hidden")}},{key:"_toImg",value:function(t,e){var s=this.dom,i=document.createElement("img"),o=this.options.settings.modalClass,a=void 0;return a="alert"===e?o+"--image":o+"--image__alert",this._modBody(),this._removeImages(),s.main.classList.add(a),i.setAttribute("src",t),s.image.classList.remove(o+"__hidden"),s.image.appendChild(i),this.isImage=!0,this}},{key:"show",value:function(){var t=this.dom.main.classList,e=this.options.settings.modalClass,s=function(){return t.add(e+"__loaded")};return this.isOpened=!0,t.remove(e+"__hidden"),this._setMode(s),this}},{key:"hide",value:function(){var t=this,e=this.dom,s=t.options.settings.modalClass;return e.main.classList.remove(s+"__loaded"),setTimeout(function(){e.main.classList.add(s+"__hidden"),t.isOpened=!1},1.2*t.options.settings.duration),this}},{key:"bind",value:function(t,e){for(var s=this,i=s.dom,o=[i.close,i.overlay,i.accept,i.decline],a=0,n=o.length,l=s._closeConstr(s,e),d=s._closeConstr(s,t);n>a;a++){var r=o[a];r&&(r.onclick=l)}return t&&(i.accept.onclick=d),e&&(i.decline.onclick=l),this}},{key:"alert",value:function(t,e,s,i){var o=this.dom,a=this.options.alert,n=this.options.settings.modalClass;return(this.isImage||this.isHTML)&&this._toModal(),o.decline.classList.add(n+"__hidden"),o.accept.classList.remove(n+"__hidden"),this._setText(t||a.title,e||a.text,s||a.button),this.bind(i),this.show(),this}},{key:"confirm",value:function(t,e,s,i,o,a){var n=this.dom,l=this.options.confirm,d=this._parseObject(t),r=this.options.settings.modalClass;return(this.isImage||this.isHTML)&&this._toModal(),n.decline.classList.remove(r+"__hidden"),n.accept.classList.remove(r+"__hidden"),this._setText(d?d.content.title||l.content.title:t||l.content.title,d?d.content.text||l.content.text:e||l.content.text,d?d.buttons.accept.content||l.buttons.accept.content:s||l.buttons.accept.content,d?d.buttons.decline.content||l.buttons.decline.content:i||l.buttons.decline.content),this.bind(d?d.buttons.accept.fn||l.buttons.accept.fn:o||l.buttons.accept.fn,d?d.buttons.decline.fn||l.buttons.decline.fn:a||l.buttons.decline.fn),this.show(),this}},{key:"image",value:function(t,e){var s=this,i=this.options.image;return s._toImg(t||i.src),s.dom.image.onclick=s._closeConstr(s,e||i.fn),s.show(),s}},{key:"paste",value:function(t,e,s,i,o,a){var n=this.dom,l=this._parseObject(t),d=this.options.paste,r=this.options.settings.modalClass;this.isImage&&this._toModal(),this.isHTML=!1,this._modBody(),l&&(e=l.content.title,t=l.content.html,s=l.buttons.accept.content,i=l.buttons.decline.content,a=l.buttons.decline.fn,o=l.buttons.accept.fn);var c=document.createElement("div");return c.classList.add(r+"__html"),c.innerHTML=t||d.content.html,n.body.appendChild(c),this._setText(e||d.content.title,null,s||d.buttons.accept.content,i||d.buttons.decline.content,!0),this.bind(o||d.buttons.accept.fn,a||d.buttons.decline.fn),n.accept.classList[s||d.buttons.accept.content?"remove":"add"](r+"__hidden"),n.decline.classList[i||d.buttons.decline.content?"remove":"add"](r+"__hidden"),this.isHTML=!0,this.show(),this}},{key:"init",value:function(){return this.sheet().html().cache().bind(),this}}]),t}();